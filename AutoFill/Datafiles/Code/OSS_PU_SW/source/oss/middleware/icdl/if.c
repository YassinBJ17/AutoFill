#include "middleware/icdl/MID_ICDL_public.h"
#include "type/common_type.h"
#include "conf/oss_conf_public.h"
#include "memory/lib_critical_service_section_def_data.h"
#include "middleware/stack_ip/ETH_public.h"
#include "middleware/stack_ip/ETH_UDP_public.h"
#include "middleware/stack_ip/ETH_UDP_private.h"
#include "middleware/icdl/ICDL_public.h"
#include "middleware/icdl/ICDL_PLT_public.h"
#include "middleware/ethernet/DRV_COM_MNT_ETH_public.h"
#include "libtools/memory/LIB_MEM_public.h"
#include "middleware/logbook/logbook_public.h"
#include "libtools/time/LIB_TIME_public.h"

    if ( g_mu_is_alive == TRUE )    {       if ( g_init_log_sent == 0u )       {          LIB_MEM_SET( (void *)&v_event_block, 0x0, sizeof(v_event_block) );          logbook_fill_event_block ( &v_event_block, (uint32_t)1,  (uint32_t)0x000000A0,                                      0, OSS_PN, OSS_COMPATIBIITY_INDEX, DATALOADER_PN, DATALOADER_COMPATIILITY_INDEX,                                     CALC_PN, CALC_SN ); #if 1          LIBT_TIME_GET(&current_time_beg); #endif          ICDL_PLT_SendDataLog ( &v_event_block , sizeof (v_event_block) , e_INIT_LOG ); #if 1          LIBT_TIME_GET(&current_time_end);          g_send_data_log_time = current_time_end - current_time_beg; #endif          g_init_log_sent ++;          g_compteur_htr_init_log_sent = g_compteur_htr;       }       if ( g_init_log_sent == 1u )       {          if ( ( g_compteur_htr_init_log_sent % (10u) == 0u ) && ( g_compteur_htr_init_log_sent > 10u ))          {             LIB_MEM_SET( (void *)&v_event_block, 0x0, sizeof(v_event_block) );             logbook_fill_event_block ( &v_event_block, (uint32_t)1,  (uint32_t)0x000000B0,                                         0, OSS_PN, OSS_COMPATIBIITY_INDEX, DATALOADER_PN, DATALOADER_COMPATIILITY_INDEX,                                        CALC_PN, CALC_SN );             ICDL_PLT_SendDataLog ( &v_event_block , sizeof (v_event_block) , e_INIT_LOG );             g_init_log_sent ++;          }          else          {             g_compteur_htr_init_log_sent ++;          }       }       if ( g_init_log_sent == 2u )       {          if ( ( ( g_compteur_htr_init_log_sent % (2u) ) == 0u ) && ( g_init_log_sent == 2u ) )          {             LIB_MEM_SET( (void *)&v_event_block, 0x0, sizeof(v_event_block) );             logbook_fill_event_block ( &v_event_block, (uint32_t)1,  (uint32_t)0x000000B0,                                        ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE,                                        ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE,                                        (uint32_t)0xDECACAFE,  (uint32_t)0xCAFEDECA );             ICDL_PLT_SendDataLog ( &v_event_block , sizeof (v_event_block) , e_PLATFORM_LOG );             g_init_log_sent ++;          }          else          {             g_compteur_htr_init_log_sent++;          }       }       if ( ( ( g_compteur_htr % (2500u) ) == 0u ) && ( g_init_log_sent == 3u ) )       {          LIB_MEM_SET( (void *)&v_event_block, 0x0, sizeof(v_event_block) );          logbook_fill_event_block ( &v_event_block, (uint32_t)1,  (uint32_t)0x000000B0,                                     ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE,                                     ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE, ICDL_LGBK_FIELD_DEFAULT_VALUE,                                     (uint32_t)0xDECACAFE,  (uint32_t)0xCAFEDECA );          ICDL_PLT_SendDataLog ( &v_event_block , sizeof (v_event_block) , e_PLATFORM_LOG );       }       if ( ( ( g_compteur_htr % (3000u) ) == 0u ) && ( g_init_log_sent == 3u ) )       {          LIB_MEM_SET( (void *)&v_temp_stream_log, 0x0, sizeof(v_temp_stream_log) );          logbook_fill_temp_stream_log ( &v_temp_stream_log, p_channel_is_a );          ICDL_PLT_SendDataLog ( &v_temp_stream_log , sizeof (v_temp_stream_log) , e_TEMP_STREAM_LOG );       }       if ( g_init_log_sent == 3u )       {          ts_trigger_block * trigger_block_pt;          ts_oss_conf_table * oss_conf;          oss_conf = (ts_oss_conf_table *)(OSS_CONF_START_ADDR);          trigger_block_pt = (ts_trigger_block *)&v_trigger_log;          LIB_MEM_SET( (void *)&v_trigger_log, 0x0, sizeof(v_trigger_log) );          readState = logbook_read_oldest_trigger_log ( &v_trigger_log );          if ( ( readState == TRUE ) && (trigger_block_pt->s_short_occ_cnt == oss_conf->s_shortoccurrencetrigger ) )          {             ICDL_PLT_SendDataLog ( &v_trigger_log , sizeof (v_trigger_log) , e_TRIGGER_LOG );          }       }       if ( ( ( g_compteur_htr % (1500u) ) == 0u ) && ( g_init_log_sent == 3u ) )       {          LIB_MEM_SET( (void *)&v_event_block, 0x0, sizeof(v_event_block) );          readState = logbook_read_oldest_critical_log ( &v_event_block );          if ( readState == TRUE )          {             ICDL_PLT_SendDataLog ( &v_event_block , sizeof (v_event_block) , e_CRITICAL_LOG );          }       }       if ( g_init_log_sent == 3u )       {          if ( ( g_compteur_htr % (10u) ) == 0u )          {             ICDL_PLT_SendLastPwrUptime( &(shmem.s_oss_counter.s_last_power_up_time), sizeof (uint32_t) );          }          if ( ( g_compteur_htr % (11u) ) == 0u )          {             ICDL_PLT_SendPowerUpCount( &(shmem.s_oss_counter.s_pw_up_count), sizeof (uint32_t) );          }          if ( ( g_compteur_htr % (12u) ) == 0u )          {             uint32_t dummy = 0x41434b00;              boolean_t secu_alert_status;             secu_alert_status = ICDL_PLT_ReceiveSecuAlert();             if ( secu_alert_status != FALSE )             {                ICDL_PLT_SendSecuAlertAck( &dummy, sizeof (uint32_t) );             }          }       }    }
