#include "driver/spi/SPI_CFEX_public.h"
#include "driver/spi/SPI_HAL_public.h"
#include "driver/spi/SPI_REG_common.h"

    for ( v_spi_index = 0ul ; v_spi_index < c_SPI_CFEX_tab_SIZE ; v_spi_index++ )    {       pt_spi_conf = &(c_SPI_CFEX_CONFIGURATION_tab[v_spi_index]);       pt_spi_reg = (ts_SPI_REG volatile *)c_SPI_ctrler_addr[pt_spi_conf->s_line_nb];       pt_spi_reg->s_MCR.u_B.s_HALT = (reg32_t)1ul;       if ( pt_spi_conf->s_slave_master == e_SPI_CFEX_MODE_MASTER )       {          pt_spi_reg->s_MCR.u_B.s_MSTR = (reg32_t)1ul;       }       else          {          pt_spi_reg->s_MCR.u_B.s_MSTR = (reg32_t)0ul;       }       pt_spi_reg->s_MCR.u_B.s_CONT_SCKE = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_DCONF = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_FRZ = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_MTFE = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_PCSSE = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_ROOE = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_PCSIS = (reg32_t)0xFFul;       pt_spi_reg->s_MCR.u_B.s_MDIS = (reg32_t)0ul;       if ( pt_spi_conf->s_transfer_mode == e_SPI_CFEX_TRANSFER_MODE_ONE )       {          pt_spi_reg->s_MCR.u_B.s_DIS_TXF = (reg32_t)1ul;          pt_spi_reg->s_MCR.u_B.s_DIS_RXF = (reg32_t)1ul;          pt_spi_reg->s_MCR.u_B.s_CLR_TXF = (reg32_t)0ul;          pt_spi_reg->s_MCR.u_B.s_CLR_RXF = (reg32_t)0ul;       }       else        {          pt_spi_reg->s_MCR.u_B.s_DIS_TXF = (reg32_t)0ul;          pt_spi_reg->s_MCR.u_B.s_DIS_RXF = (reg32_t)0ul;          pt_spi_reg->s_MCR.u_B.s_CLR_TXF = (reg32_t)0ul;          pt_spi_reg->s_MCR.u_B.s_CLR_RXF = (reg32_t)0ul;       }       pt_spi_reg->s_MCR.u_B.s_SMPL_PT = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_XSPI = (reg32_t)0ul;                pt_spi_reg->s_MCR.u_B.s_FCPCS = (reg32_t)0ul;       pt_spi_reg->s_MCR.u_B.s_PES = (reg32_t)0ul;       if ( pt_spi_conf->s_slave_master == e_SPI_CFEX_MODE_MASTER )       {          for ( v_spi_ctar = 0ul; v_spi_ctar < SPI_CFEX_CTAR_NB; v_spi_ctar++ )          {             pt_spi_reg->s_MODE.u_CTAR[v_spi_ctar].u_R = (reg32_t)pt_spi_conf->s_ctar_conf[v_spi_ctar];          }       }       else          {          pt_spi_reg->s_MODE.u_CTAR[0].u_R = (reg32_t)pt_spi_conf->s_ctar_conf[0] & (reg32_t)DMA_CTAR_SLAVE_CONF_MASK;       }       if ( pt_spi_conf->s_transfer_mode == e_SPI_CFEX_TRANSFER_MODE_DMA )       {          if (  pt_spi_conf->s_slave_master == e_SPI_CFEX_MODE_MASTER )          {             pt_spi_cmd_default  = (reg16_t *)(&(pt_spi_reg->s_PUSHR));             *pt_spi_cmd_default = (reg16_t)  (pt_spi_conf->s_cmd_by_default >> 16);              *pt_spi_cmd_default = (reg16_t)  (pt_spi_conf->s_cmd_by_default >> 16);              *pt_spi_cmd_default = (reg16_t)  (pt_spi_conf->s_cmd_by_default >> 16);              *pt_spi_cmd_default = (reg16_t)  (pt_spi_conf->s_cmd_by_default >> 16);           }          pt_spi_reg->s_SR.u_R   = (reg32_t)0x02130000ul;          pt_spi_reg->s_RSER.u_R = (reg32_t)0x4313C000ul;       }       pt_spi_reg->s_MCR.u_B.s_HALT = (reg32_t)0ul;       SPI_CFEX_descriptor_tab[v_spi_index].s_address = c_SPI_ctrler_addr[pt_spi_conf->s_line_nb];       SPI_CFEX_descriptor_tab[v_spi_index].s_command_value = pt_spi_conf->s_cmd_by_default;       SPI_CFEX_descriptor_tab[v_spi_index].s_dma_conf_tx_nb = pt_spi_conf->s_dma_conf_tx_nb;       SPI_CFEX_descriptor_tab[v_spi_index].s_dma_conf_rx_nb = pt_spi_conf->s_dma_conf_rx_nb;    }
